"use strict";function e(e,t,i){return t&&function(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,n(s.key),s)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function t(e,t,i){return(t=n(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function n(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}const i="extended-click-outside:",s=`${i} element already has extended click outside listener`,o=`${i} element must be a valid HTMLElement`,r=`${i} listener must be a function`,u=`${i} element has no click outside listener`,c=`${i} can not run outside a document`,a=function(e,t){let n=t.parentNode;for(;n;){if(n===e)return!0;if(n===document.documentElement||!n)return!1;n=n.parentNode}},l=function(e,t){switch(!0){case!t||!t.length:return!1;case e.altKey&&t.includes("alt"):case e.ctrlKey&&t.includes("ctrl"):case e.shiftKey&&t.includes("shift"):return!0;default:return!1}};let d=function(){return e(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t(this,"_clickName",document.ontouchstart?"touchstart":"click"),t(this,"_outsideListeners",new Map)},[{key:"init",value:function(e,t,n={}){var i=this;let u;const d=n.blockKeys||[],f=n.capture||!1,m=n.passive||!1,v=n.once||!1,h=n.selfOnly||!1,p=n.useWarnings||!1;e&&"object"==typeof e?t&&"function"==typeof t?window&&document&&document.documentElement?this._outsideListeners.has(e)?p&&console.warn(s):e&&e instanceof HTMLElement?(u=v?function(e,t,n,i,s,o,r,u){const c=function(d){const f=d.target;f!==e&&(!s&&a(e,f)||l(d,o)||(t(d),document.documentElement.removeEventListener(r,c,{capture:n,passive:i}),u()))};return document.documentElement.addEventListener(r,c,{capture:n,passive:i}),c}(e,t,f,m,h,d,this._clickName,function(){return i._outsideListeners.delete(e)}):function(e,t,n,i,s,o,r){const u=function(n){const i=n.target;i!==e&&(!s&&a(e,i)||l(n,o)||t(n))};return document.documentElement.addEventListener(r,u,{capture:n,passive:i}),u}(e,t,f,m,h,d,this._clickName),this._outsideListeners.set(e,{handler:u,options:{capture:f,passive:m}})):p&&console.warn(o):p&&console.warn(c):p&&console.warn(r):p&&console.warn(o)}},{key:"remove",value:function(e,t=!1){if(!this._outsideListeners.has(e))return void(t&&console.warn(u));const n=this._outsideListeners.get(e);document.documentElement.removeEventListener("click",n.handler,n.options),this._outsideListeners.delete(e)}},{key:"removeAllListeners",value:function(){for(let e of this._outsideListeners.values())document.documentElement.removeEventListener("click",e.handler,e.options);this._outsideListeners.clear()}},{key:"isListenerExisting",value:function(e){return this._outsideListeners.has(e)}},{key:"getCurrentSnapshots",value:function(){let e=[];for(let t of this._outsideListeners.keys()){const n=t.outerHTML.match(/^(<.+?>)/is)[0];e.push(n)}return e}},{key:"getListenersCount",value:function(){return this._outsideListeners.size}}])}();module.exports=d;
//# sourceMappingURL=index.cjs.js.map
