{"version":3,"file":"mjs.js","sources":["../sets/warnings.js","../utils/listeners.js","../utils/frameworks.js","../index.js"],"sourcesContent":["/**\r\n * @overview Console warnings\r\n */\r\nconst initial = \"extended-click-outside:\";\r\nexport const alreadyHasListener = `${initial} element already has extended click outside listener`;\r\nexport const invalidElement = `${initial} element must be a valid HTMLElement`;\r\nexport const invalidListener = `${initial} listener must be a function`;\r\nexport const missingElement = `${initial} element has no click outside listener`;\r\nexport const outsideDocument = `${initial} can not run outside a document`;","/**\r\n * Determines whether given element is inside\r\n * root ExtendedClickOutside instance element\r\n * @function\r\n * @param {HTMLElement} element - ExtendedClickOutside root element\r\n * @param {HTMLElement} target - target of \"click/touchstart\" event\r\n * @returns {boolean} location\r\n */\r\nconst isParentElement = (element, target) => {\r\n  let currentTarget = target.parentNode;\r\n\r\n  while (currentTarget) {\r\n    if (currentTarget === element) return true;\r\n    if (\r\n      currentTarget === document.documentElement \r\n      || !currentTarget\r\n    ) return false;\r\n\r\n    currentTarget = currentTarget.parentNode;\r\n  }\r\n};\r\n\r\n/**\r\n * Determines whether to block ExtendedClickOutside\r\n * listener by special keys combination\r\n * @function\r\n * @param {MouseEvent} event - MouseEvent instance\r\n * @param {Array} blockKeys - list of keys\r\n * @returns {boolean} restriction\r\n */\r\nconst blockByKeys = (event, blockKeys) => {\r\n  switch(true) {\r\n    case !blockKeys || !blockKeys.length:\r\n      return false;\r\n    case event.altKey && blockKeys.includes(\"alt\"):\r\n      return true;\r\n    case event.ctrlKey && blockKeys.includes(\"ctrl\"):\r\n      return true;\r\n    case event.shiftKey && blockKeys.includes(\"shift\"):\r\n      return true;\r\n    default: return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Sets reusable ExtendedClickOutside listener\r\n * @function\r\n * @param {HTMLElement} element - ExtendedClickOutside root element\r\n * @param {Function} listener - ExtendedClickOutside listener\r\n * @param {boolean} capture - event \"capture\" flag\r\n * @param {boolean} selfOnly - only current element flag\r\n * @param {Array} blockKeys - list of keys\r\n * @param {string} eventName - type of event\r\n * @returns {Function} handler\r\n */\r\nexport const setListener = (\r\n  element,\r\n  listener,\r\n  capture,\r\n  selfOnly,\r\n  blockKeys,\r\n  eventName,\r\n) => {\r\n  const handler = (event) => {\r\n    const target = event.target;\r\n\r\n    if (target === element) return;\r\n    if (!selfOnly && isParentElement(element, target)) return;\r\n    if (blockByKeys(event, blockKeys)) return;\r\n\r\n    listener();\r\n  };\r\n\r\n  document.documentElement.addEventListener(eventName, handler, capture ? capture : false);\r\n\r\n  return handler;\r\n};\r\n\r\n/**\r\n * Sets disposable ExtendedClickOutside listener\r\n * @function\r\n * @param {HTMLElement} element - ExtendedClickOutside root element\r\n * @param {Function} listener - ExtendedClickOutside listener\r\n * @param {boolean} capture - event \"capture\" flag\r\n * @param {boolean} selfOnly - only current element flag\r\n * @param {Array} blockKeys - list of keys\r\n * @param {string} eventName - type of event\r\n * @returns {Function} handler\r\n */\r\nexport const setListenerOnce = (\r\n  element,\r\n  listener,\r\n  capture,\r\n  selfOnly,\r\n  blockKeys,\r\n  eventName,\r\n) => {\r\n  const handler = (event) => {\r\n    const target = event.target;\r\n\r\n    if (target === element) return;\r\n    if (!selfOnly && isParentElement(element, target)) return;\r\n    if (blockByKeys(event, blockKeys)) return;\r\n\r\n    listener();\r\n    document.documentElement.removeEventListener(eventName, handler);\r\n  };\r\n\r\n  document.documentElement.addEventListener(eventName, handler, capture ? capture : false);\r\n\r\n  return handler;\r\n};","/**\r\n * Extracts element from Angular refs\r\n * @function\r\n * @param {Object} element - Angular ref\r\n * @returns {HTMLElement|null} - element\r\n */\r\nconst angularHandler = (element) => {\r\n  if (element.nativeElement) return element.nativeElement;\r\n  if (element.elementRef && element.elementRef.nativeElement) {\r\n    return element.nativeElement;\r\n  }\r\n  if (element.element && element.element.nativeElement) {\r\n    return element.element.nativeElement;\r\n  }\r\n\r\n  return null\r\n}\r\n\r\n/**\r\n * Extracts element from JQuery selectors\r\n * @function\r\n * @param {Object} element - JQuery selector\r\n * @returns {HTMLElement|null} - element\r\n */\r\nconst jQueryHandler = (element) => {\r\n  if (element[0]) return element[0];\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Extracts element from React refs\r\n * @function\r\n * @param {Object} element - React ref\r\n * @returns {HTMLElement|null} - element\r\n */\r\nconst reactHandler = (element) => {\r\n  if (element.current) return element.current;\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Extracts element from Vue refs\r\n * @function\r\n * @param {Object} element - Vue ref\r\n * @returns {HTMLElement|null} - element\r\n */\r\nconst vueHandler = (element) => {\r\n  if (element.$el) return element.$el;\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Tries to extract element using all handlers\r\n * @function\r\n * @param {Object} element - any ref\r\n * @returns {HTMLElement|null} - element\r\n */\r\nexport default (element) => {\r\n  let elementFromHandler;\r\n  const handlers = [\r\n    angularHandler,\r\n    jQueryHandler,\r\n    reactHandler,\r\n    vueHandler,\r\n  ];\r\n\r\n  for (let counter = 0; counter < handlers.length; counter++) {\r\n    elementFromHandler = handlers[counter](element);\r\n\r\n    if (elementFromHandler) return elementFromHandler;\r\n  }\r\n  \r\n  return null;\r\n}","import {\r\n  alreadyHasListener,\r\n  invalidElement,\r\n  invalidListener,\r\n  missingElement,\r\n  outsideDocument,\r\n} from \"./sets/warnings\";\r\n\r\nimport { \r\n  setListener,\r\n  setListenerOnce,\r\n} from \"./utils/listeners\";\r\n\r\nimport frameworks from \"./utils/frameworks\";\r\n\r\n/**\r\n * ExtendedClickOutside instance constructor\r\n * @author Ridiger Daniil Dmitrievich, 2023\r\n * @class\r\n * @version 1.0.3\r\n */\r\nexport default class ExtendedClickOutside {\r\n\r\n  _clickName = !document.ontouchstart ? \"click\" : \"touchstart\";\r\n  _outsideListeners = new Map();\r\n\r\n  /**\r\n   * Initializes ExtendedClickOutside listener\r\n   * @method\r\n   * @param {HTMLElement} element - ExtendedClickOutside root element\r\n   * @param {Function} listener - ExtendedClickOutside listener\r\n   * @param {Object} config - configuration\r\n   */\r\n  init(element, listener, config = {}) {\r\n    let handler;\r\n    const blockKeys = config.blockKeys;\r\n    const capture = config.capture;\r\n    const once = config.once;\r\n    const selfOnly = config.selfOnly;\r\n    const useWarnings = config.useWarnings;\r\n    \r\n    if (!element || typeof element !== \"object\") {\r\n      useWarnings && console.warn(invalidElement);\r\n      return;\r\n    }\r\n\r\n    if (!listener || typeof listener !== \"function\") {\r\n      useWarnings && console.warn(invalidListener);\r\n      return;\r\n    }\r\n\r\n    if (!window || !document || !document.documentElement) {\r\n      useWarnings && console.warn(outsideDocument);\r\n      return;\r\n    }\r\n\r\n    if (this._outsideListeners.has(element)) {\r\n      useWarnings && console.warn(alreadyHasListener);\r\n      return;\r\n    }\r\n\r\n    if (!(element instanceof HTMLElement)) {\r\n      element = frameworks(element);\r\n      if (!element) {\r\n        useWarnings && console.warn(invalidElement);\r\n        return;\r\n      }\r\n    }\r\n\r\n    if (once) {\r\n      handler = setListenerOnce(\r\n        element,\r\n        listener,\r\n        capture,\r\n        selfOnly,\r\n        blockKeys,\r\n        this._clickName,\r\n      );\r\n    } else {\r\n      handler = setListener(\r\n        element,\r\n        listener,\r\n        capture,\r\n        selfOnly,\r\n        blockKeys,\r\n        this._clickName,\r\n      );\r\n    }\r\n\r\n    this._outsideListeners.set(element, handler);\r\n  }\r\n\r\n  /**\r\n   * Removes ExtendedClickOutside listener\r\n   * @method\r\n   * @param {HTMLElement} element - ExtendedClickOutside root element\r\n   * @param {boolean} useWarnings - console warnings flag\r\n   */\r\n  remove(element, useWarnings = false) {\r\n    if (!this._outsideListeners.has(element)) {\r\n      useWarnings && console.warn(missingElement);\r\n      return;\r\n    }\r\n\r\n    const handler = this._outsideListeners.get(element);\r\n\r\n    document.documentElement.removeEventListener(\"click\", handler);\r\n\r\n    this._outsideListeners.delete(element);\r\n  }\r\n\r\n  /**\r\n   * Removes all ExtendedClickOutside listeners\r\n   * @method\r\n   */\r\n  removeAllListeners() {\r\n    for (let handler of this._outsideListeners.values()) {\r\n      document.documentElement.removeEventListener(\"click\", handler);\r\n    }\r\n\r\n    this._outsideListeners.clear();\r\n  }\r\n\r\n  /**\r\n   * Writes root ExtendedClickOutside elements to snapshots list\r\n   * @method\r\n   * @returns {Array} snapshots\r\n   */\r\n  getCurrentSnapshots() {\r\n    let output = [];\r\n\r\n    for (let element of this._outsideListeners.keys()) {\r\n      const snapshot = element.outerHTML.match(/^(<.+?>)/is)[0];\r\n      output.push(snapshot);\r\n    }\r\n\r\n    return output;\r\n  }\r\n\r\n  /**\r\n   * Writes current ExtendedClickOutside listeners count\r\n   * @method\r\n   * @returns {number} count\r\n   */\r\n  getClickOutsidesCount() {\r\n    return this._outsideListeners.size;\r\n  }\r\n}"],"names":["initial","alreadyHasListener","invalidElement","invalidListener","missingElement","outsideDocument","isParentElement","element","target","currentTarget","parentNode","document","documentElement","blockByKeys","event","blockKeys","length","altKey","includes","ctrlKey","shiftKey","setListener","listener","capture","selfOnly","eventName","handler","addEventListener","setListenerOnce","removeEventListener","angularHandler","nativeElement","elementRef","jQueryHandler","reactHandler","current","vueHandler","$el","elementFromHandler","handlers","counter","ExtendedClickOutside","ontouchstart","Map","config","once","useWarnings","console","warn","window","_outsideListeners","has","HTMLElement","frameworks","_clickName","set","get","delete","values","clear","output","keys","snapshot","outerHTML","match","push","size"],"mappings":"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"}